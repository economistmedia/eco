function ecoStart(){if(_adReady){console.log((new Date).getTime()+": ad ready "+_adReady),console.log((new Date).getTime()+": start function running"),time.eco=(new Date).getTime(),eco.run.impression(),eco.run.queue(),console.log((new Date).getTime()+": start function completed")}else{console.log((new Date).getTime()+": ad ready "+_adReady),console.log((new Date).getTime()+": start function waiting");var e=setInterval(function(){console.log((new Date).getTime()+": ad ready "+_adReady),_adReady&&(clearInterval(e),console.log((new Date).getTime()+": start function running"),time.eco=(new Date).getTime(),eco.run.impression(),eco.run.queue(),console.log((new Date).getTime()+": start function completed"))},500)}}var _docReady=!1,_adReady=!1,_prodReady=!1,_debugMode=!1;!function(e,n,t,o,i,a,c){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=n.createElement(t),c=n.getElementsByTagName(t)[0],a.async=1,a.src=o,c.parentNode.insertBefore(a,c)}(window,document,"script","js/analytics.js","ga"),!function(e){var n=/iPhone/i,t=/iPod/i,o=/iPad/i,i=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,r=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,d=/IEMobile/i,u=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,s=/BlackBerry/i,l=/BB10/i,g=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,f=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,v=RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),p=function(e,n){return e.test(n)},h=function(e){var h=e||navigator.userAgent,w=h.split("[FBAN");return void 0!==w[1]&&(h=w[0]),this.apple={phone:p(n,h),ipod:p(t,h),tablet:!p(n,h)&&p(o,h),device:p(n,h)||p(t,h)||p(o,h)},this.amazon={phone:p(c,h),tablet:!p(c,h)&&p(r,h),device:p(c,h)||p(r,h)},this.android={phone:p(c,h)||p(i,h),tablet:!p(c,h)&&!p(i,h)&&(p(r,h)||p(a,h)),device:p(c,h)||p(r,h)||p(i,h)||p(a,h)},this.windows={phone:p(d,h),tablet:p(u,h),device:p(d,h)||p(u,h)},this.other={blackberry:p(s,h),blackberry10:p(l,h),opera:p(g,h),firefox:p(f,h),chrome:p(m,h),device:p(s,h)||p(l,h)||p(g,h)||p(f,h)||p(m,h)},this.seven_inch=p(v,h),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},w=function(){var e=new h;return e.Class=h,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=h:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=w():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=w()):e.isMobile=w()}(this),function(e){var n=function(e,n){if(void 0!==n){var t=e.replace(n,function(){return Math.round((new Date).getTime()/1e3)});return(new Image).src=t}var t=e;return(new Image).src=t},t=function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"},o=function(){return this.load=(new Date).getTime(),this.view=function(){return Math.floor(((new Date).getTime()-this.load)/1e3)},this.action=function(){return Math.floor(((new Date).getTime()-this.eco)/1e3)},this},i=function(){var e={},o={},i=[];return this.config={app:function(n){e.app=n},advertiser:function(n){e.advertiser=n},campaign:function(n){e.campaign=n},issue:function(n){e.issue=n},ga:function(n){e.ga=n},gaClient:function(n){e.gaClient=n}},this.impression={phone:function(e){o.phone=e},tablet:function(e){o.tablet=e},timestamp:function(e){o.timestamp=e}},this.open=function(e,n){isMobile.phone?_prodReady?(window.location="internal-"+e,ga("send","event","external",e,eco.run.config(),time.action())):window.location=e:void 0!==tablet?_prodReady?(window.location="internal-"+n,ga("send","event","external",n,eco.run.config(),time.action())):window.location=n:_prodReady?(window.location="internal-"+e,ga("send","event","external",e,eco.run.config(),time.action())):window.location=e},this.heatmap=function(e){document.getElementById(e).addEventListener("click",function(e){var n=e.pageX,o=e.pageY,i={x:n,y:o,o:t()};ga("send","event","heatmap",JSON.stringify(i),eco.run.config(),time.action(),{nonInteraction:!0})})},this.video=function(e,n){var t=document.getElementById(e),o=function(){return Math.floor(t.duration)},i=function(){return Math.floor(t.currentTime)},a=function(){return Math.floor(100*(i()/o()))},c=0,n=document.getElementById(n);t.addEventListener("timeupdate",function(){a()>25&&(ga("send","event","video","firstQuartile: "+t.currentSrc,eco.run.config(),a(),{nonInteraction:!0}),this.removeEventListener("timeupdate",arguments.callee))}),t.addEventListener("timeupdate",function(){a()>50&&(ga("send","event","video","secondQuartile: "+t.currentSrc,eco.run.config(),a(),{nonInteraction:!0}),this.removeEventListener("timeupdate",arguments.callee))}),t.addEventListener("timeupdate",function(){a()>75&&(ga("send","event","video","thirdQuartile: "+t.currentSrc,eco.run.config(),a(),{nonInteraction:!0}),this.removeEventListener("timeupdate",arguments.callee))}),t.addEventListener("play",function(){0==c?(ga("send","event","video","play: "+t.currentSrc,eco.run.config(),a()),c++):(t.play(),ga("send","event","video","resume: "+t.currentSrc,eco.run.config(),a()))},!1),t.addEventListener("pause",function(){a()<100&&ga("send","event","video","pause: "+t.currentSrc,eco.run.config(),a())},!1),t.addEventListener("ended",function(){ga("send","event","video","ended: "+t.currentSrc,eco.run.config(),a(),{nonInteraction:!0}),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),c=0},!1),document.addEventListener("webkitfullscreenchange",function(e){var n=!!(document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement);n?console.log("Full screen YES"):(console.log("Full screen NO"),t.pause())}),void 0!==n&&n.addEventListener("click",function(){t.play()},!1)},this.event=function(e,t){url&&void 0!==o.timestamp?(n(t,o.timestamp),ga("send","event","custom",e,eco.run.config(),time.action())):void 0!==url?(n(t),ga("send","event","custom",e,eco.run.config(),time.action())):ga("send","event","custom",e,eco.run.config(),time.action())},this.queue=function(e){i.push(e)},this.run={config:function(n){if(void 0!==n){return e[n]}var t=e.app+"|"+e.advertiser+"|"+e.campaign+"|"+e.issue;return t.toLowerCase()},impression:function(){o.phone&&void 0!==o.tablet?void 0!==o.timestamp?isMobile.phone?(n(o.phone,o.timestamp),ga("send","event","ad","view",eco.run.config(),time.view(),{nonInteraction:!0})):(n(o.tablet,o.timestamp),ga("send","event","ad","view",eco.run.config(),time.view(),{nonInteraction:!0})):isMobile.phone?(n(o.phone,o.timestamp),ga("send","event","ad","view",eco.run.config(),time.view(),{nonInteraction:!0})):(n(o.tablet,o.timestamp),ga("send","event","ad","view",eco.run.config(),time.view(),{nonInteraction:!0})):ga("send","event","ad","view",eco.run.config(),time.view(),{nonInteraction:!0})},queue:function(){for(_debugMode&&i.forEach(function(e,n){console.log((new Date).getTime()+": running task "+n)});i.length>0;){i.shift()()}},ad:function(e){if(void 0!==e){console.log((new Date).getTime()+": debug mode on"),_debugMode=!0;var n=setInterval(function(){_docReady&&(clearInterval(n),_adReady=!0,eco.check.config(),eco.check.impression(),eco.check.queue(),ecoStart())},500)}else{_prodReady=!0;var n=setInterval(function(){_docReady&&(clearInterval(n),_adReady=!0)},500)}}},this.check={config:function(n){return void 0!==n?(console.log((new Date).getTime()+": configuration property"),console.log(e[n]),e[n]):(console.log((new Date).getTime()+": configuration detail"),console.log(e),e)},impression:function(){console.log((new Date).getTime()+": impression detail"),console.log(o)},queue:function(){console.log((new Date).getTime()+": task queue detail"),i.forEach(function(e,n){console.log((new Date).getTime()+": task "+n,e)})},ad:function(){return _adReady}},this},a=function(){var e=new i;return e["class"]=i,e},c=function(){var e=new o;return e["class"]=o,e};e.time=c(),e.eco=a()}(this),document.onreadystatechange=function(){switch(document.readyState){case"interactive":console.log((new Date).getTime()+": document interactive"),_prodReady!==!1?eco.config.ga("UA-69628544-11"):eco.config.ga("UA-69628544-10"),ga("create",eco.run.config("ga"),"auto"),ga("set","checkProtocolTask",null),ga("set","checkStorageTask",null),ga("send","screenview",{appName:eco.run.config("app"),screenName:eco.run.config()}),ga("send","event","ad","load",eco.run.config(),{nonInteraction:!0}),_debugMode!==!1&&console.log((new Date).getTime()+": "+eco.run.config("ga")+" ga sent"),void 0!==eco.run.config("gaClient")&&(ga("create",eco.run.config("gaClient"),"auto","clientTracker"),ga("clientTracker.set","checkProtocolTask",null),ga("clientTracker.set","checkStorageTask",null),ga("clientTracker.send","pageview"),ga("clientTracker.send","event","ad","load",eco.run.config(),{nonInteraction:!0}),_debugMode!==!1&&console.log((new Date).getTime()+": "+eco.run.config("gaClient")+" gaClient sent")),window.onpagehide||null===window.onpagehide?window.addEventListener("pagehide",function(){ga("send","event","ad","hide",eco.run.config(),time.action(),{nonInteraction:!0})},!1):window.addEventListener("unload",function(){ga("send","event","ad","hide",eco.run.config(),time.action(),{nonInteraction:!0})},!1);break;case"complete":console.log((new Date).getTime()+": document complete"),_docReady=!0}};