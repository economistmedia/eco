function ecoStart(){if(_adReady){eco.time.eco=(new Date).getTime(),eco.impression.getAll(),eco.queue.runQueue()}else{var e=setInterval(function(){_adReady&&(clearInterval(e),eco.time.eco=(new Date).getTime(),eco.impression.getAll(),eco.queue.runQueue())},500)}}var _docReady=!1,_adReady=!1,_prodReady=!1,_debugMode=!1;!function(e,n,t,o,i,a,c){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=n.createElement(t),c=n.getElementsByTagName(t)[0],a.async=1,a.src=o,c.parentNode.insertBefore(a,c)}(window,document,"script","js/analytics.js","ga"),!function(e){var n=/iPhone/i,t=/iPod/i,o=/iPad/i,i=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,r=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,d=/IEMobile/i,s=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,u=/BlackBerry/i,l=/BB10/i,m=/Opera Mini/i,g=/(CriOS|Chrome)(?=.*\bMobile\b)/i,p=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,f=RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),v=function(e,n){return e.test(n)},h=function(e){var h=e||navigator.userAgent,w=h.split("[FBAN");return void 0!==w[1]&&(h=w[0]),this.apple={phone:v(n,h),ipod:v(t,h),tablet:!v(n,h)&&v(o,h),device:v(n,h)||v(t,h)||v(o,h)},this.amazon={phone:v(c,h),tablet:!v(c,h)&&v(r,h),device:v(c,h)||v(r,h)},this.android={phone:v(c,h)||v(i,h),tablet:!v(c,h)&&!v(i,h)&&(v(r,h)||v(a,h)),device:v(c,h)||v(r,h)||v(i,h)||v(a,h)},this.windows={phone:v(d,h),tablet:v(s,h),device:v(d,h)||v(s,h)},this.other={blackberry:v(u,h),blackberry10:v(l,h),opera:v(m,h),firefox:v(p,h),chrome:v(g,h),device:v(u,h)||v(l,h)||v(m,h)||v(p,h)||v(g,h)},this.seven_inch=v(f,h),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},w=function(){var e=new h;return e.Class=h,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=h:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=w():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=w()):e.isMobile=w()}(this),function(e){var n=function(){var e=function(e,n){if(void 0!==n){var t=e.replace(n,function(){return Math.round((new Date).getTime()/1e3)});return(new Image).src=t}var t=e;return(new Image).src=t},n=function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"};this.config=function(){var e={};return{app:function(n){return e.app=n,this},advertiser:function(n){return e.advertiser=n,this},campaign:function(n){return e.campaign=n,this},issue:function(n){return e.issue=n,this},ga:function(n){return e.ga=n,this},gaClient:function(n){return e.gaClient=n,this},getProperty:function(n){return e[n]},getCampaign:function(){var n=e.app+"|"+e.advertiser+"|"+e.campaign+"|"+e.issue;return n.toLowerCase()},getAll:function(){console.log((new Date).getTime()-eco.time.load+"ms: configuration detail",e)}}}(),this.impression=function(){var n={};return{phone:function(e){return n.phone=e,this},tablet:function(e){return n.tablet=e,this},timestamp:function(e){return n.timestamp=e,this},timestampValue:function(){return n.timestamp},getAll:function(){return n.phone&&void 0!==n.tablet?void 0!==n.timestamp?isMobile.phone?(eco.sendGA("ad","view",eco.time.view(),"nonInteraction"),e(n.phone,n.timestamp)):(eco.sendGA("ad","view",eco.time.view(),"nonInteraction"),e(n.tablet,n.timestamp)):isMobile.phone?(eco.sendGA("ad","view",eco.time.view(),"nonInteraction"),e(n.phone,n.timestamp)):(eco.sendGA("ad","view",eco.time.view(),"nonInteraction"),e(n.tablet,n.timestamp)):void eco.sendGA("ad","view",eco.time.view(),"nonInteraction")},check:function(){console.log((new Date).getTime()-eco.time.load+"ms: impression detail",n)}}}(),this.heatmap=function(e){document.getElementById(e).addEventListener("click",function(e){var t=e.pageX,o=e.pageY,i={x:t,y:o,o:n()};eco.sendGA("heatmap",JSON.stringify(i),eco.time.action(),"nonInteraction")})},this.open=function(e,n){isMobile.phone?_prodReady?(window.location="internal-"+e,eco.sendGA("external",e,eco.time.action())):(window.location=e,eco.sendGA("external",e,eco.time.action())):void 0!==n?_prodReady?(window.location="internal-"+n,eco.sendGA("external",n,eco.time.action())):(window.location=n,eco.sendGA("external",n,eco.time.action())):_prodReady?(window.location="internal-"+e,eco.sendGA("external",e,eco.time.action())):(window.location=e,eco.sendGA("external",e,eco.time.action()))},this.video=function(e,n){var t=document.getElementById(e),o=function(){return Math.floor(t.duration)},i=function(){return Math.floor(t.currentTime)},a=function(){return Math.floor(100*(i()/o()))},c=0,n=document.getElementById(n);return t.addEventListener("timeupdate",function(){a()>25&&(eco.sendGA("video","firstQuartile: "+t.currentSrc,a(),"nonInteraction"),this.removeEventListener("timeupdate",arguments.callee))}),t.addEventListener("timeupdate",function(){a()>50&&(eco.sendGA("video","secondQuartile: "+t.currentSrc,a(),"nonInteraction"),this.removeEventListener("timeupdate",arguments.callee))}),t.addEventListener("timeupdate",function(){a()>75&&(eco.sendGA("video","thirdQuartile: "+t.currentSrc,a(),"nonInteraction"),this.removeEventListener("timeupdate",arguments.callee))}),t.addEventListener("play",function(){0==c?(c++,eco.sendGA("video","play: "+t.currentSrc,eco.time.action())):(t.play(),eco.sendGA("video","resume: "+t.currentSrc,a()))},!1),t.addEventListener("pause",function(){a()<100&&eco.sendGA("video","pause: "+t.currentSrc,a())},!1),t.addEventListener("ended",function(){c=0,eco.sendGA("video","ended: "+t.currentSrc,a(),"nonInteraction"),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},!1),document.addEventListener("webkitfullscreenchange",function(e){var n=!!(document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement);n||t.pause()}),void 0!==n&&n.addEventListener("click",function(){t.play()},!1),this},this.event=function(n,t){return t&&void 0!==eco.impression.timestampValue()?(e(t,eco.impression.timestampValue()),eco.sendGA("custom",n,eco.time.action())):void 0!==t?(e(t),eco.sendGA("custom",n,eco.time.action())):eco.sendGA("custom",n,eco.time.action()),this},this.queue=function(){var e=[];return{addTask:function(n){return e.push(n),this},getQueue:function(){e.forEach(function(e,n){return console.log((new Date).getTime()-eco.time.load+"ms: task "+n+"\n",e),n})},runQueue:function(){for(_debugMode&&e.forEach(function(e,n){});e.length>0;){e.shift()()}}}}(),this.ad={debug:function(){_debugMode=!0,console.log((new Date).getTime()-eco.time.load+"ms: debug mode on"),eco.config.getAll(),eco.impression.check(),eco.queue.getQueue();var e=setInterval(function(){console.log((new Date).getTime()-eco.time.load+"ms: ecoStart waiting"),_docReady&&(clearInterval(e),_adReady=!0,ecoStart(),console.log((new Date).getTime()-eco.time.load+"ms: ecoStart complete"))},500)},run:function(){_prodReady=!0;var e=setInterval(function(){_docReady&&(clearInterval(e),_adReady=!0)},500)}},this.time={view:function(){return Math.floor(((new Date).getTime()-this.load)/1e3)},action:function(){return Math.floor(((new Date).getTime()-this.eco)/1e3)}},this.sendGA=function(e,n,t,o){void 0!==o?void 0!==eco.config.getProperty("gaClient")?(ga("send","event",e,n,eco.config.getCampaign(),t,{nonInteraction:!0}),ga("clientTracker.send","event",e,n,eco.config.getCampaign(),t,{nonInteraction:!0})):ga("send","event",e,n,eco.config.getCampaign(),t,{nonInteraction:!0}):void 0!==eco.config.getProperty("gaClient")?(ga("send","event",e,n,eco.config.getCampaign(),t,{transport:"beacon"}),ga("clientTracker.send","event",e,n,eco.config.getCampaign(),t,{transport:"beacon"})):ga("send","event",e,n,eco.config.getCampaign(),t,{transport:"beacon"})}},t=function(){var e=new n;return e["class"]=n,e};e.eco=t(),eco.time.load=(new Date).getTime()}(this),document.onreadystatechange=function(){switch(document.readyState){case"interactive":_prodReady!==!1?eco.config.ga("UA-69628544-11"):eco.config.ga("UA-69628544-10"),ga("create",eco.config.getProperty("ga"),"auto"),_debugMode!==!1&&ga(function(e){}),ga("set","checkProtocolTask",null),ga("set","checkStorageTask",null),ga("send","screenview",{appName:eco.config.getProperty("app"),screenName:eco.config.getCampaign()}),void 0!==eco.config.getProperty("gaClient")&&(ga("create",eco.config.getProperty("gaClient"),"auto","clientTracker"),_debugMode!==!1&&ga(function(e){}),ga("clientTracker.set","checkProtocolTask",null),ga("clientTracker.set","checkStorageTask",null),ga("clientTracker.send","pageview")),eco.sendGA("ad","load","0","nonInteraction"),"onpagehide"in window?window.addEventListener("pagehide",function(){ga("send","event","ad","hide",eco.config.getCampaign(),eco.time.action(),{transport:"beacon",nonInteraction:!0}),void 0!==eco.config.getProperty("gaClient")&&ga("clientTracker.send","event","ad","hide",eco.config.getCampaign(),eco.time.action(),{transport:"beacon",nonInteraction:!0})},!1):window.addEventListener("unload",function(){ga("send","event","ad","hide",eco.config.getCampaign(),eco.time.action(),{transport:"beacon",nonInteraction:!0}),void 0!==eco.config.getProperty("gaClient")&&ga("clientTracker.send","event","ad","hide",eco.config.getCampaign(),eco.time.action(),{transport:"beacon",nonInteraction:!0})},!1);break;case"complete":_docReady=!0}};